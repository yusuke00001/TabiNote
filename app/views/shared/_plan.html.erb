<div class="plan-container">
  <p>プラン<%= plan.title %></p>
  <div class="spots-container">
    <% plan.spots.each do |spot| %>
      <%= render partial: "shared/plan_spots", locals: { trip: trip, spot: spot } %>
    <% end %>
  </div>
  <div class="guide-book">
    <div class="guide-headline">
      <div class="time-cell">
        <%= t('plans.index.time')%>
      </div>
      <div class="content-cell">
        <%= t('plans.index.content') %>
      </div>
    </div>
    <% current_time = trip.start_time %>
    <% plan.spots.each_with_index do |spot, i| %>
      <% if i > 0 %>
        <% move_duration = plan.spots[i - 1].move_duration(plan) %>
        <div class="guide-row">
          <div class="time-cell">
            <%= current_time.strftime("%H:%M") %>
          </div>
          <div class="content-cell">
            <%= t('plans.index.move-time') %>(<%= move_duration %>分)
          </div>
        </div>
        <% current_time += move_duration.minutes %>
      <% end %>
      <div class="guide-row">
        <div class="time-cell">
          <%= current_time.strftime("%H:%M") %>
        </div>
        <div class="content-cell">
          <%= link_to trip_spot_path(trip.id, spot.id), class:"spot_link" do %>
            <%= spot.spot_name %>(滞在:<%= spot.category.stay_time %>分)
          <% end %>
        </div>
      </div>
      <% current_time += spot.category.stay_time.minutes %>
      <% if i == plan.spots.length - 1 %>
        <div class="guide-row">
          <div class="time-cell">
            <%= current_time.strftime("%H:%M") %>
          </div>
          <div class="content-cell">
            <%= t('plans.index.finish') %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="dot-icon">
    <% size.times.each_with_index do |icon, icon_index| %>
      <% if plan_index == icon_index %>
        <i class="fa-solid fa-circle"></i>
      <% else %>
        <i class="fa-regular fa-circle"></i>
      <% end %>
    <% end %>
  </div>
</div>
